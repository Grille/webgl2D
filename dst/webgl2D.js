window.webGL2DStart=function(p){var a={j:null,B:null,c:[],b:[],a:[],f:[],v:[],P:null,R:null,M:null,N:null,l:0,i:0,w:!1,s:null,m:[],g:0,A:new Float32Array(2E3),ha:0,u:0,translate:[0,0],scale:[1,1],angle:0,sin:0,cos:1,ia:new Int32Array(4),pow:function(a){if(16>=a)return 16;if(32>=a)return 32;if(64>=a)return 64;if(128>=a)return 128;if(256>=a)return 256;if(512>=a)return 512;if(1024>=a)return 1024;if(2048>=a)return 2048;if(4096>=a)return 4096;if(8192>=a)return 8192},C:function(b){var f=a.j,c=a.translate,
  e=a.scale,k=a.sin,g=a.cos,m=.5*f.ga;f=.5*f.fa;var q=b.length;if(!1===!(0===k&&1===g))for(k=0;k<q;k+=2)a.A[k+0]=-1+(b[k]+c[0])*e[0]/m,a.A[k+1]=1-(b[k+1]+c[1])*e[1]/f;else for(var d=0;d<q;d+=2)a.A[d+0]=-1+(b[d]*e[0]*g-b[d+1]*e[1]*k+c[0])/m,a.A[d+1]=1-(b[d+1]*e[1]*g+b[d]*e[0]*k+c[1])/f;return a.A},compileShader:function(b,f){var c=a.j,e=c.createShader(c.FRAGMENT_SHADER),k=c.createShader(c.VERTEX_SHADER);c.shaderSource(k,b);c.compileShader(k);c.shaderSource(e,f);c.compileShader(e);var g=c.createProgram();
  c.attachShader(g,k);c.attachShader(g,e);c.linkProgram(g);c.getProgramParameter(g,c.LINK_STATUS)||alert("Could not initialise shaders");g.O=c.getAttribLocation(g,"aVertexPosition");c.enableVertexAttribArray(g.O);g.I=c.getAttribLocation(g,"aTextureCoord");c.enableVertexAttribArray(g.I);g.L=c.getAttribLocation(g,"aVertexColor");c.enableVertexAttribArray(g.L);g.ka=c.getUniformLocation(g,"uSampler");return g},K:function(b){l.useProgram(b);a.B=b},ea:function(b){var f=a.j;var c=f.createTexture();var e=document.createElement("canvas"),
  k=e.getContext("2d");k.G=!1;k.H=!1;e.width=a.pow(b.width);e.height=a.pow(b.height);k.drawImage(b,0,0,b.width,b.height);f.bindTexture(f.TEXTURE_2D,c);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,e);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.bindTexture(f.TEXTURE_2D,null);c.width=e.width;c.height=e.height;c.F=b.width;c.D=b.height;c.index=a.u;a.u++;return c},da:function(b){var f=a.j;var c=f.createTexture();
  c.o=new Image;c.o.onload=function(){var b=document.createElement("canvas"),k=b.getContext("2d");k.G=!1;k.H=!1;b.width=a.pow(c.o.width);b.height=a.pow(c.o.height);k.drawImage(c.o,0,0,c.o.width,c.o.height);f.bindTexture(f.TEXTURE_2D,c);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,f.RGBA,f.UNSIGNED_BYTE,b);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.bindTexture(f.TEXTURE_2D,null);c.width=b.width;c.height=b.height;c.F=c.o.width;c.D=
  c.o.height;c.index=a.u;a.u++};c.o.src=b;return c},J:function(b,f,c){var e=a.j,k=e.RGB,g=e.createTexture();e.bindTexture(e.TEXTURE_2D,g);e.texImage2D(e.TEXTURE_2D,0,k,f,c,0,k,e.UNSIGNED_BYTE,b);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST);e.generateMipmap(e.TEXTURE_2D);e.bindTexture(e.TEXTURE_2D,null);
  g.width=f;g.height=c;g.F=f;g.D=c;g.index=a.u;a.u++;return g},la:function(){var b=a.j;var f=b.createTexture();var c=document.createElement("canvas"),e=c.getContext("2d");e.G=!1;e.H=!1;c.width=a.pow(512);c.height=a.pow(512);e.drawImage(image,0,0,image.width,image.height);b.bindTexture(b.TEXTURE_2D,f);b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,c);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,b.NEAREST);b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,b.NEAREST);b.bindTexture(b.TEXTURE_2D,
  null);f.width=c.width;f.height=c.height;f.F=image.width;f.D=image.height;f.index=a.u;a.u++;return f},ca:function(){a.j.viewport(0,0,l.canvas.width,l.canvas.height);a.j.clear(l.COLOR_BUFFER_BIT);a.l=0;a.i=0;a.s=null;a.g=-1},W:function(b,f,c,e){var k=a.l,g=a.i;c=a.C(c);var m=b.width,q=b.height;var d=2*g;a.c[d+0]=c[0];a.c[d+1]=c[1];a.c[d+2]=c[2];a.c[d+3]=c[3];a.c[d+4]=c[4];a.c[d+5]=c[5];d=2*g;a.b[d+0]=f[0]/m;a.b[d+1]=f[1]/q;a.b[d+2]=f[2]/m;a.b[d+3]=f[3]/q;a.b[d+4]=f[4]/m;a.b[d+5]=f[5]/q;d=4*g;a.a[d+
  0]=e[0];a.a[d+1]=e[1];a.a[d+2]=e[2];a.a[d+3]=e[3];a.a[d+4]=e[4];a.a[d+5]=e[5];a.a[d+6]=e[6];a.a[d+7]=e[7];a.a[d+8]=e[8];a.a[d+9]=e[9];a.a[d+10]=e[10];a.a[d+11]=e[11];a.f[3*k+0]=g+0;a.f[3*k+1]=g+1;a.f[3*k+2]=g+2;b!=a.s&&(a.g++,a.s=b,a.v[a.g]=b,a.m[a.g]=0);a.m[a.g]+=1;a.l+=1;a.i+=3},X:function(b,f,c,e){var k=a.l,g=a.i,m=c.length/2;c=a.C(c);for(var q=b.width,d=b.height,h=2*g,l=2*g,p=4*g,n=0;n<m;n++)a.c[h+0+2*n]=c[0+2*n],a.c[h+1+2*n]=c[1+2*n],a.b[l+0+2*n]=f[0+2*n]/q,a.b[l+1+2*n]=f[1+2*n]/d,a.a[p+0+4*
  n]=e[0+4*n],a.a[p+1+4*n]=e[1+4*n],a.a[p+2+4*n]=e[2+4*n],a.a[p+3+4*n]=e[3+4*n];for(f=0;f<m-2;f++)a.f[3*k+0+3*f]=g+0,a.f[3*k+1+3*f]=g+1+f,a.f[3*k+2+3*f]=g+2+f;b!=a.s&&(a.g++,a.s=b,a.v[a.g]=b,a.m[a.g]=0);a.m[a.g]+=m-2;a.l+=m-2;a.i+=m},V:function(b,f,c,e){var k=a.l,g=a.i;c=a.C(c);var m=b.width,l=b.height;var d=2*g;a.c[d+0]=c[0];a.c[d+1]=c[1];a.c[d+2]=c[2];a.c[d+3]=c[3];a.c[d+4]=c[4];a.c[d+5]=c[5];a.c[d+6]=c[6];a.c[d+7]=c[7];a.c[d+8]=.25*(c[0]+c[2]+c[4]+c[6]);a.c[d+9]=.25*(c[1]+c[3]+c[5]+c[7]);d=2*g;a.b[d+
  0]=f[0]/m;a.b[d+1]=f[1]/l;a.b[d+2]=f[2]/m;a.b[d+3]=f[3]/l;a.b[d+4]=f[4]/m;a.b[d+5]=f[5]/l;a.b[d+6]=f[6]/m;a.b[d+7]=f[7]/l;a.b[d+8]=.25*(a.b[d+0]+a.b[d+2]+a.b[d+4]+a.b[d+6]);a.b[d+9]=.25*(a.b[d+1]+a.b[d+3]+a.b[d+5]+a.b[d+7]);d=4*g;a.a[d+0]=e[0];a.a[d+1]=e[1];a.a[d+2]=e[2];a.a[d+3]=e[3];a.a[d+4]=e[4];a.a[d+5]=e[5];a.a[d+6]=e[6];a.a[d+7]=e[7];a.a[d+8]=e[8];a.a[d+9]=e[9];a.a[d+10]=e[10];a.a[d+11]=e[11];a.a[d+12]=e[12];a.a[d+13]=e[13];a.a[d+14]=e[14];a.a[d+15]=e[15];a.a[d+16]=.25*(e[0]+e[4]+e[8]+e[12]);
  a.a[d+17]=.25*(e[1]+e[5]+e[9]+e[13]);a.a[d+18]=.25*(e[2]+e[6]+e[10]+e[14]);a.a[d+19]=.25*(e[3]+e[7]+e[11]+e[15]);d=3*k;a.f[d+0]=g+0;a.f[d+1]=g+1;a.f[d+2]=g+4;a.f[d+3]=g+1;a.f[d+4]=g+2;a.f[d+5]=g+4;a.f[d+6]=g+2;a.f[d+7]=g+3;a.f[d+8]=g+4;a.f[d+9]=g+3;a.f[d+10]=g+0;a.f[d+11]=g+4;b!=a.s&&(a.g++,a.s=b,a.v[a.g]=b,a.m[a.g]=0);a.m[a.g]+=4;a.l+=4;a.i+=5},drawImage:function(b,f,c,e){var k=a.l,g=a.i,m=c[0],l=c[2]+c[0],d=c[1];c=c[3]+c[1];m=a.C([m,c,l,c,l,d,m,d]);d=b.width;var h=b.height;l=f[0]/d;d=(f[0]+f[2])/
  d;c=f[1]/h;f=(f[1]+f[3])/h;h=2*g;a.c[h+0]=m[0];a.c[h+1]=m[1];a.c[h+2]=m[2];a.c[h+3]=m[3];a.c[h+4]=m[4];a.c[h+5]=m[5];a.c[h+6]=m[6];a.c[h+7]=m[7];h=2*g;a.b[h+0]=l;a.b[h+1]=f;a.b[h+2]=d;a.b[h+3]=f;a.b[h+4]=d;a.b[h+5]=c;a.b[h+6]=l;a.b[h+7]=c;h=4*g;a.a[h+0]=a.a[h+4]=a.a[h+8]=a.a[h+12]=e[0];a.a[h+1]=a.a[h+5]=a.a[h+9]=a.a[h+13]=e[1];a.a[h+2]=a.a[h+6]=a.a[h+10]=a.a[h+14]=e[2];a.a[h+3]=a.a[h+7]=a.a[h+11]=a.a[h+15]=e[3];h=3*k;a.f[h+0]=g+0;a.f[h+1]=g+1;a.f[h+2]=g+2;a.f[h+3]=g+0;a.f[h+4]=g+2;a.f[h+5]=g+3;b!=
  a.s&&(a.g++,a.s=b,a.v[a.g]=b,a.m[a.g]=0);a.m[a.g]+=2;a.l+=2;a.i+=4},Y:function(){var b=a.j;b.bindBuffer(b.ARRAY_BUFFER,a.P);!1===a.w?b.bufferData(b.ARRAY_BUFFER,a.c,b.DYNAMIC_DRAW):b.bufferSubData(b.ARRAY_BUFFER,0,a.c,0,2*a.i);b.vertexAttribPointer(a.B.O,2,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,a.M);!1===a.w?b.bufferData(b.ARRAY_BUFFER,a.a,b.DYNAMIC_DRAW):b.bufferSubData(b.ARRAY_BUFFER,0,a.a,0,4*a.i);b.vertexAttribPointer(a.B.L,4,b.FLOAT,!1,0,0);b.bindBuffer(b.ARRAY_BUFFER,a.R);!1===a.w?b.bufferData(b.ARRAY_BUFFER,
  a.b,b.DYNAMIC_DRAW):b.bufferSubData(b.ARRAY_BUFFER,0,a.b,0,2*a.i);b.vertexAttribPointer(a.B.I,2,b.FLOAT,!1,0,0);b.bindBuffer(b.ELEMENT_ARRAY_BUFFER,a.N);!1===a.w?b.bufferData(b.ELEMENT_ARRAY_BUFFER,a.f,b.DYNAMIC_DRAW):b.bufferSubData(b.ARRAY_BUFFER,0,a.f,0,a.l);a.w=!0},Z:function(){for(var b=a.j,f=0,c=0,e;f<=a.g;)e=a.m[f],b.activeTexture(b.TEXTURE0),b.bindTexture(b.TEXTURE_2D,a.v[f]),b.drawElements(b.TRIANGLES,3*e,b.UNSIGNED_SHORT,6*c),c+=e,f++},h:{ba:function(b,f){a.translate=[b,f]},U:function(b,
  f){a.translateX+=b;a.translateY+=f},aa:function(b,f){a.scaleX=b;a.scaleY=f},T:function(b,f){a.scaleX+=b;a.scaleY+=f},$:function(b){a.angle=b;a.sin=Math.sin(3.14159265*a.angle/180);a.cos=Math.cos(3.14159265*a.angle/180)},S:function(b){a.angle+=b;a.sin=Math.sin(3.14159265*a.angle/180);a.cos=Math.cos(3.14159265*a.angle/180)},reset:function(){a.translateX=0;a.translateY=0;a.scaleX=1;a.scaleY=1;a.angle=0;a.sin=0;a.cos=1},save:function(){return[a.translate,a.scale,a.angle]},load:function(b){a.translate=
  b[0];a.scale=b[1];a.angle=b[2];a.sin=Math.sin(3.14159265*a.angle/180);a.cos=Math.cos(3.14159265*a.angle/180)}}};a.j=p.getContext("webgl2",{antialias:!1,depth:!1});if(void 0===a.j||null===a.j)a.j=p.getContext("webgl",{antialias:!1,depth:!1});var l=a.j;console.log(l);a.P=l.createBuffer();a.M=l.createBuffer();a.R=l.createBuffer();a.N=l.createBuffer();l.ga=p.width;l.fa=p.height;a.c=new Float32Array(2E5);a.b=new Float32Array(2E5);a.a=new Float32Array(4E5);a.f=new Uint16Array(15E4);a.v=[];a.m=[];a.K(a.compileShader("\n      attribute vec2 aVertexPosition;\n      attribute vec2 aTextureCoord;\n      attribute vec4 aVertexColor;\n\n      varying vec2 vTextureCoord;\n      varying vec4 vColor;\n\n      void main(void) {\n          gl_Position = vec4(aVertexPosition.x, aVertexPosition.y, 0.0, 1.0);\n          vTextureCoord = aTextureCoord;\n          vColor = aVertexColor / vec4(255,255,255,255);\n      }\n      ",
  "\n      precision mediump float;\n\n      varying vec2 vTextureCoord;\n      varying vec4 vColor;\n\n      uniform sampler2D uSampler;\n\n      void main(void) {\n        gl_FragColor = vec4(texture2D(uSampler, vTextureCoord) * vColor);\n      }\n      "));l.disable(l.DEPTH_TEST);l.blendFunc(l.SRC_ALPHA,l.ONE_MINUS_SRC_ALPHA);l.enable(l.BLEND);a.ja=a.J(new Uint8Array([255,255,255]),1,1);a.textureFromImage=a.ea;a.textureFromFile=a.da;a.textureFromPixelArray=a.J;a.startScene=a.ca;a.endScene=a.Y;a.renderScene=
  a.Z;a.drawTriangle=a.W;a.drawTriangleFan=a.X;a.drawSquare=a.V;a.drawImage=a.drawImage;a.compileShader=a.compileShader;a.useShader=a.K;a.matrix=a.h;a.h.setTranslate=a.h.ba;a.h.addTranslate=a.h.U;a.h.setScale=a.h.aa;a.h.addScale=a.h.T;a.h.setRotate=a.h.$;a.h.addRotate=a.h.S;a.h.reset=a.h.reset;a.h.save=a.h.save;a.h.load=a.h.load;return a};